{"version":3,"sources":["node_modules/tslib/tslib.es6.js","mvc/model.ts","mvc/view.ts","mvc/controller.ts","index.ts","client.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","result","done","then","__generator","body","_","f","y","g","label","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault"],"mappings":"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","file":"client.92211fe6.js","sourceRoot":"..","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export interface IItemModel {\n  name: string;\n  value: number;\n}\n\nexport interface IItemData {\n  name: string;\n  value?: number;\n  onChange?: (value: number) => void;\n  color?: string;\n}\n\nexport default class Model {\n  public items: Record<string, IItemModel> = {};\n  public total: number = 100;\n\n  public getEqualParts(n: number): number[] {\n    const values = [];\n    let total = this.total;\n\n    while (total > 0 && n > 0) {\n      let a = total / n;\n\n      if (a % 2 == 0) {\n        a = Math.floor(total / n);\n      } else {\n        a = Math.ceil(total / n);\n      }\n\n      total -= a;\n      n--;\n      values.push(a);\n    }\n\n    return values;\n  }\n\n  public getSumOfItems(): number {\n    return Object\n      .keys(this.items)\n      .reduce((acc, item) => {\n        const currValue = this.items[item].value;\n        return isNaN(currValue) ? acc : acc + currValue;\n      }, 0);\n  }\n\n  public isValidValue(value?: number): boolean {\n    var value = value && isNaN(value) ? 0 : value;\n    return this.getSumOfItems() + (value || 0) <= this.total;\n  }\n\n  public hasNoItems(): boolean {\n    return Object.keys(this.items).length === 0;\n  }\n\n  public makeSumEqualTotal(items: IItemData[], sum: number): void {\n    const deficit = this.total - sum;\n    const lastIndex = items.length - 1;\n    items[lastIndex].value = (items[lastIndex].value || 0) + deficit;\n  }\n}\n","interface IHandle {\n  handle: HTMLElement;\n  nameFrom: string;\n  nameTo: string;\n}\n\nexport default class View {\n  public static ids: number = 0;\n\n  public static createSlider(): HTMLElement {\n    var slider = document.createElement('div');\n    slider.classList.add('slider');\n    slider.setAttribute('name', 'slider_' + ++View.ids);\n    return slider;\n  }\n\n  public static getRandomColor(): string {\n    var letters = '0123456789ABCDEF';\n    var color = '#';\n    for (var i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n  }\n\n  public static removeElement(item: HTMLElement): void {\n    if (!item.parentNode) { return; }\n\n    item.parentNode.removeChild(item);\n  }\n\n  public node: HTMLElement;\n  public slider: HTMLElement;\n  public items: any;\n  public handles: IHandle[];\n\n  public constructor(node: HTMLElement) {\n    this.node = node;\n    this.slider = View.createSlider();\n    this.items = {};\n    this.handles = [];\n\n    this.node.appendChild(this.slider);\n  }\n\n  public removeFromHandles(handle: HTMLElement): void {\n    this.handles = this.handles.filter((handleData) => handleData.handle !== handle);\n  }\n\n  public createLine(name: string, color: string): HTMLElement {\n    const line = document.createElement('div');\n\n    line.setAttribute('name', name);\n    line.classList.add('line');\n    line.style.background = color;\n\n    return line;\n  }\n\n  public createHandle(): HTMLElement {\n    const handle = document.createElement('div');\n\n    handle.classList.add('handle');\n\n    return handle;\n  }\n\n  public appendItem(item: HTMLElement): void {\n    this.slider.insertBefore(item, this.slider.firstChild);\n  }\n\n  public setLineWidth(name: string, value: number): void {\n    this.items[name].line.style.width = `${value}%`;\n  }\n\n  public getLastItemName(): string {\n    const namesPrev = Object\n      .keys(this.items)\n      .filter(item => this.items[item]._next === null, this);\n\n    if (namesPrev.length !== 1) {\n      throw new Error('Error when trying to find last item');\n    }\n\n    return namesPrev[0];\n  }\n\n  public getHandleData(handle: HTMLElement): IHandle {\n    const handleIndex = this.handles.findIndex(\n      handleData => handleData.handle === handle\n    );\n\n    if (handleIndex === -1) {\n      throw new Error('Error when trying to find handle');\n    }\n\n    return this.handles[handleIndex];\n  }\n\n  public getPercentOf(name: string): number {\n    const particularLineWidth = this.items[name].line.offsetWidth;\n    return this.convertToPercent(particularLineWidth);\n  }\n\n  public convertToPercent(value: number): number {\n    const totalPercent = this.slider.offsetWidth;\n    return (value * 100) / totalPercent;\n  }\n\n  public findHandleDataByToLineName(name: string): null | IHandle {\n    const handleIndex = this.handles.findIndex(handle => {\n      return handle.nameTo === name;\n    });\n\n    return handleIndex === -1 ? null : this.handles[handleIndex];\n  }\n\n  public findHandleDataByFromLineName(name: string): null | IHandle {\n    const handleIndex = this.handles.findIndex(handle => {\n      return handle.nameFrom === name;\n    });\n\n    return handleIndex === -1 ? null : this.handles[handleIndex];\n  }\n\n  public makeHandleMoveable(handle: HTMLElement, updateValues: (a: number, b: number) => void): void {\n\n    handle.onmousedown = (event) => {\n      event.preventDefault();\n\n      const sliderWidthStr = this.slider.firstChild ? getComputedStyle(this.slider.firstChild as Element).width : '0';\n      const longestLineWidth = Number.parseFloat(sliderWidthStr || '');\n      const longestLinePercent = Math.round(this.convertToPercent(longestLineWidth));\n\n      const isPartialFilledSlider = longestLinePercent !== 100;\n      const shiftX = event.clientX - handle.getBoundingClientRect().left;\n\n      const onMouseMove = (event: MouseEvent) => {\n        let newLeft = event.clientX - shiftX - this.slider.getBoundingClientRect().left;\n\n        const considerLeftEdgeCase = () => {\n          const nameFrom = this.getHandleData(handle).nameFrom;\n          const prevHandleData = this.findHandleDataByToLineName(nameFrom);\n          const isFirstHandle = prevHandleData === null;\n\n          if (!isFirstHandle) {\n            const prevHandle = prevHandleData && prevHandleData.handle;\n            const prevHandleLeft = prevHandle && Number.parseFloat(getComputedStyle(prevHandle).left || '0') || 0;\n\n            if (newLeft < prevHandleLeft) {\n              newLeft = prevHandleLeft;\n              return;\n            }\n          }\n\n          if (newLeft < 0) {\n            newLeft = 0;\n          }\n        }\n\n        const considerRightEdgeCase = () => {\n          let rightEdgeSource = this.slider.offsetWidth;\n          let offset = this.slider.getBoundingClientRect().left;\n          newLeft += offset;\n\n          if (isPartialFilledSlider) {\n            const longestLine = this.slider.firstChild;\n            rightEdgeSource = longestLine && (longestLine as HTMLElement).offsetWidth || rightEdgeSource;\n            offset = longestLine && (longestLine as HTMLElement).getBoundingClientRect().left || offset;\n          }\n\n          const nameTo = this.getHandleData.call(this, handle).nameTo;\n          const nextHandleData = this.findHandleDataByFromLineName.call(this, nameTo);\n          const isLastLine = nextHandleData === null;\n\n          if (!isLastLine) {\n            const nextHandle = nextHandleData.handle;\n            const nextHandleLeft = Number.parseFloat(getComputedStyle(nextHandle).left || '0');\n\n            if (newLeft > nextHandleLeft) {\n              newLeft = nextHandleLeft;\n              return;\n            }\n          }\n\n          newLeft -= offset;\n\n          const rightEdge = rightEdgeSource;\n          if (newLeft > rightEdge) {\n            newLeft = rightEdge;\n          }\n        }\n\n        considerLeftEdgeCase();\n        considerRightEdgeCase();\n\n        const curLeft = Number.parseFloat(getComputedStyle(handle).left || '0');\n        const newLeftInPercent = Math.round(this.convertToPercent(newLeft));\n        const oldLeftInPercent = Math.round(this.convertToPercent(curLeft));\n\n        handle.style.left = `${newLeftInPercent}%`;\n\n        updateValues(oldLeftInPercent, newLeftInPercent);\n\n      }\n\n      const onMouseUp = () => {\n        document.removeEventListener('mouseup', onMouseUp);\n        document.removeEventListener('mousemove', onMouseMove);\n      }\n\n      document.addEventListener('mousemove', onMouseMove);\n      document.addEventListener('mouseup', onMouseUp);\n    };\n\n    handle.ondragstart = function () {\n      return false;\n    };\n  }\n}\n","import Model, { IItemModel, IItemData } from './model';\nimport View from './view';\n\ninterface IItemView {\n  name: string;\n  line: HTMLElement;\n  onChange: TOnChange;\n  _next: null;\n  _previous: null;\n}\n\ninterface IItem {\n  name: string;\n  line: HTMLElement;\n  handle: HTMLElement;\n}\n\ninterface ISingleItem {\n  line: HTMLElement;\n  name: string;\n  value: number;\n}\n\ntype TOnChange = (ids: number, params: { auto: boolean }) => void;\n\nexport default class Controller {\n  private _model: Model;\n  private _view: View;\n\n  public constructor(model: Model, view: View) {\n    this._model = model;\n    this._view = view;\n  }\n\n  public createSingleItem(name: string, value: number, onChange: TOnChange, color: string): ISingleItem {\n    if (!name || name.trim() === '') {\n      throw new Error('Name must be provided!');\n    }\n\n    const line = this._view.createLine(name, color);\n    const itemView: IItemView = {\n      name: name,\n      line: line,\n      onChange: onChange,\n      _next: null,\n      _previous: null,\n    };\n\n    const itemModel: IItemModel = {\n      name: name,\n      value: value,\n    };\n\n    this._view.items[name] = itemView;\n    this._view.setLineWidth(name, value);\n\n    this._model.items[name] = itemModel;\n\n    onChange(value, { auto: value === this._model.total });\n\n    return {\n      line,\n      name: name,\n      value: value,\n    };\n  }\n\n  public createItem(name: string, value: number, onChange: TOnChange, color: string): IItem {\n    const line = this._view.createLine(name, color);\n    const namePrev = this._view.getLastItemName();\n\n    this._model.items[name] = {\n      name: name,\n      value: value,\n    };\n\n    this._view.items[name] = {\n      name: name,\n      line: line,\n      onChange: onChange,\n      _previous: this._view.items[namePrev],\n      _next: null,\n    };\n\n    this._view.items[namePrev]._next = this._view.items[name];\n\n    const handle = this._view.createHandle();\n    this._view.handles.push({ handle: handle, nameFrom: namePrev, nameTo: name });\n\n    return { name, line, handle };\n  }\n\n  public createItems = function (items: IItemData[]): IItem | IItem[] {\n    if (items.length === 1) {\n      return this.createSingleItem(items[0]);\n    }\n\n    const firstItemData = items[0];\n    const singleLineItem = this.createSingleItem(firstItemData.name, firstItemData.value, firstItemData.onChange, firstItemData.color);\n    const restItems = items.slice(1).map(function (itemData) {\n      return this.createItem(itemData.name, itemData.value, itemData.onChange, itemData.color);\n    }, this);\n\n    return [singleLineItem].concat(restItems);\n  }\n\n  public divideSliderIntoEqualParts(): void {\n    var names = Object.keys(this._model.items);\n    var amount = names.length;\n    var diffs = this._model.getEqualParts(amount);\n\n    names.forEach(function (name, index) {\n      this._model.items[name].value = diffs[index];\n      var onChange = this._view.items[name].onChange;\n      onChange(diffs[index], { auto: true });\n\n      var aggregate = diffs\n        .slice(0, index + 1)\n        .reduce(function (acc, curr) { return acc + curr }, 0);\n      this._view.setLineWidth(name, aggregate);\n\n    }, this);\n\n    this._view.handles.forEach(function (handleData) {\n      var item = {\n        handle: handleData.handle,\n        name: handleData.nameTo,\n      };\n\n      this.bindHandle(item);\n    }, this);\n\n  }\n\n  public addItemToSlider(value: number, item: IItem): void {\n    var aggregation = Object.keys(this._model.items).reduce((acc, curr) => {\n      return acc + this._model.items[curr].value;\n    }, 0);\n\n    this._view.setLineWidth(item.name, aggregation);\n    this._view.appendItem(item.handle);\n    this.bindHandle(item);\n    this._view.appendItem(item.line);\n\n    this._view.items[item.name].onChange(value);\n  }\n\n  public addItemsToSlider(items: IItem | IItem[]): void {\n\n    if (!Array.isArray(items)) {\n      this._view.appendItem(items.line);\n      return;\n    }\n\n    var singleLine = items[0];\n    this._view.appendItem(singleLine.line);\n\n    items.forEach((item, index, arr) => {\n      const isSingleLine = index === 0;\n      if (isSingleLine) {\n        return;\n      }\n\n      var itemName = item.name;\n      var value = this._model.items[itemName].value;\n      var prevName = arr[index - 1].name;\n      var prevLineWidth = this._view.getPercentOf(prevName);\n\n      this._view.setLineWidth(item.name, value + prevLineWidth);\n      this._view.appendItem(item.handle);\n      this.bindHandle(item);\n      this._view.appendItem(item.line);\n\n      this._view.items[itemName].onChange(value);\n    });\n  }\n\n  public addItemToSliderAuto(item: IItem): void {\n    this.divideSliderIntoEqualParts();\n    this._view.appendItem(item.handle);\n    this._view.appendItem(item.line);\n  }\n\n  public addItemToSliderGreedy(item: IItem): void {\n    var emptySpace = this._model.total - this._model.getSumOfItems();\n    this._model.items[item.name].value = emptySpace;\n    this._view.setLineWidth(item.name, this._model.total);\n    this._view.appendItem(item.handle);\n    this.bindHandle(item);\n    this._view.appendItem(item.line);\n\n    this._view.items[item.name].onChange(emptySpace, { auto: true });\n  }\n\n  public addItemToSliderBySplitLastItem(item: IItem): void {\n    var prevItem = this._view.items[item.name]._previous;\n    var prevItemValue = this._model.items[prevItem.name].value;\n\n    var prevDividedInto2 = prevItemValue / 2;\n    var newPrevItemValue = Math.floor(prevDividedInto2);\n    var newItemValue = Math.ceil(prevDividedInto2);\n\n    prevItem.line.style.width = Number.parseInt(prevItem.line.style.width) - newItemValue + '%';\n\n    this._model.items[item.name].value = newItemValue;\n    this._model.items[prevItem.name].value = newPrevItemValue;\n    this.addItemToSlider(newItemValue, item);\n\n    this._view.items[item.name].onChange(newItemValue);\n    this._view.items[prevItem.name].onChange(newPrevItemValue);\n  }\n\n  public bindHandle(item: IItem): void {\n    const handle = item.handle;\n    const prevItem = this._view.items[item.name]._previous;\n\n    handle.style.left = Math.round(this._view.getPercentOf(prevItem.name)) + '%';\n\n    const updateValues = (oldHandleLeft: number, newHandleLeft: number) => {\n      var handleDataIndex = this._view.handles.findIndex(function (handleData) {\n        return handleData.handle === handle;\n      });\n\n      if (handleDataIndex === -1) {\n        throw new Error(\"Can't find handle\");\n      }\n\n      var handleData = this._view.handles[handleDataIndex];\n\n      var nameFrom = handleData.nameFrom;\n      var nameTo = handleData.nameTo;\n\n      // view\n      this._view.setLineWidth(nameFrom, newHandleLeft);\n\n      // model\n      const diff = oldHandleLeft - newHandleLeft;\n      this._model.items[nameFrom].value -= diff;\n      this._model.items[nameTo].value += diff;\n\n      var fromOnChange = this._view.items[nameFrom].onChange;\n      var toOnChange = this._view.items[nameTo].onChange;\n\n      fromOnChange(this._model.items[nameFrom].value);\n      toOnChange(this._model.items[nameTo].value);\n    }\n\n    this._view.makeHandleMoveable(handle, updateValues);\n  }\n\n  public removeItem(name: string, onRemove: () => void): void {\n    var removingItemModel = this._model.items[name];\n    var removingItemView = this._view.items[name];\n\n    if (!removingItemModel || !removingItemView) {\n      console.warn('Item ' + name + ' not found');\n      return;\n    }\n\n    var isSingleItem = Object.keys(this._model.items).length === 1;\n\n    if (isSingleItem) {\n      this._model.items = {};\n      this._view.items = {};\n      this._view.handles = [];\n\n      View.removeElement(removingItemView.line);\n\n      onRemove();\n\n      return;\n    }\n\n    var isLastItem = this._view.getLastItemName() === name;\n\n    if (isLastItem) {\n      const handleData = this._view.findHandleDataByToLineName(name);\n      const line = removingItemView.line;\n      const prevItemName = handleData && handleData.nameFrom;\n      const valueTo = removingItemModel.value;\n\n      if (!prevItemName) {\n        throw new Error('Unexpected behavior during remove last item');\n      }\n\n      this._view.items[prevItemName]._next = null;\n      this._model.items[prevItemName].value += valueTo;\n\n      this._view.setLineWidth(prevItemName, this._model.total);\n      this._view.items[prevItemName].onChange(this._model.items[prevItemName].value);\n\n      if (handleData) {\n        View.removeElement(handleData.handle);\n        this._view.removeFromHandles(handleData.handle);\n      }\n\n      View.removeElement(line);\n\n      delete this._model.items[name];\n      delete this._view.items[name];\n\n      onRemove();\n\n      return;\n    }\n\n    // Generic case\n    const handleData = this._view.findHandleDataByFromLineName(name);\n    const nextItemName = handleData && handleData.nameTo;\n    const removingItemValue = removingItemModel.value;\n    var line = removingItemView.line;\n\n    if (!nextItemName) {\n      throw new Error('Unexpected behavior during remove item');\n    }\n\n    this._model.items[nextItemName].value += removingItemValue;\n    this._view.items[nextItemName]._previous = removingItemView._previous;\n\n    var isFirstItem = removingItemView._previous === null;\n\n    if (!isFirstItem) {\n      removingItemView._previous._next = removingItemView._next;\n    }\n\n    // This doesn't work correctly\n    const updateHandles = () => {\n      if (isLastItem) {\n        return;\n      }\n\n      var leftHandleData = this._view.findHandleDataByToLineName(name);\n      var rightHandleData = this._view.findHandleDataByFromLineName(name);\n\n      if (leftHandleData && rightHandleData) {\n        leftHandleData.nameTo = rightHandleData.nameTo;\n      }\n    }\n\n    updateHandles();\n\n    this._view.items[nextItemName].onChange(this._model.items[nextItemName].value);\n\n    if (handleData) {\n      this._view.removeFromHandles(handleData.handle);\n      View.removeElement(handleData.handle);\n    }\n    View.removeElement(line);\n\n    delete this._model.items[name];\n    delete this._view.items[name];\n\n    onRemove();\n\n  }\n}\n","import Model, { IItemData } from './mvc/model';\nimport View from './mvc/view';\nimport Controller from './mvc/controller';\n\ninterface IAddItemsOptions {\n  force?: boolean;\n}\n\nexport default class Slider {\n  private _model: Model;\n  private _view: View;\n  private _controller: Controller;\n  private _wasChanged = false;\n\n  public constructor(node: HTMLElement | null) {\n    if (!node) {\n      throw new Error('Node is empty!');\n    }\n\n    this._model = new Model();\n    this._view = new View(node);\n    this._controller = new Controller(this._model, this._view);\n  }\n\n  public mkOnChange(onChange?: (value: number) => void): () => void {\n    return ((value: number, options: { auto: boolean }) => {\n      var auto = options && options.auto;\n      var isNumber = typeof value === 'number' && !isNaN(value);\n\n      this._wasChanged = auto ? this._wasChanged : true;\n\n      onChange && isNumber && onChange(value);\n    }).bind(this);\n  }\n\n  public mkOnRemove(onRemove?: () => void): () => void {\n    return (function () {\n      onRemove && onRemove();\n    }).bind(this);\n  }\n\n  public addItem(itemData: IItemData): void {\n    const { value, onChange, name, color } = itemData;\n\n    if (!this._model.isValidValue(value)) {\n      throw new Error(\"Total can't be greater than \" + this._model.total);\n    }\n\n    const hasNameAlreadyTaken = this._model.items[name];\n\n    if (hasNameAlreadyTaken) {\n      throw new Error(`Name '${name}' has already taken`);\n    }\n\n    if (this._model.hasNoItems()) {\n      const validValue = Number.parseInt(`${value}`, 10) || this._model.total;\n      const item = this._controller.createSingleItem(name, validValue, this.mkOnChange(onChange), color || View.getRandomColor());\n      this._view.appendItem(item.line);\n\n      if (value && !isNaN(value)) {\n        this._wasChanged = true;\n      }\n      return;\n    }\n\n    const item = this._controller.createItem(name, (value || 0), this.mkOnChange(onChange), color || View.getRandomColor());\n\n    if (value && !isNaN(value)) {\n      this._wasChanged = true;\n      this._controller.addItemToSlider(value, item);\n      return;\n    }\n\n    if (this._wasChanged) {\n      const noSpaceLeft = this._model.getSumOfItems() === this._model.total;\n      if (noSpaceLeft) {\n        this._controller.addItemToSliderBySplitLastItem(item);\n      } else {\n        this._controller.addItemToSliderGreedy(item);\n      }\n      return;\n    }\n\n    this._controller.addItemToSliderAuto(item);\n    return;\n  }\n\n  public addItems(itemsData: IItemData[], options?: IAddItemsOptions): void {\n\n    const force = options && options.force;\n\n    const someItemsAlreadyAdded = Object.keys(this._model.items).length !== 0;\n\n    if (someItemsAlreadyAdded) {\n      throw new Error(\"Items can not be added to already initialized slider\");\n    }\n\n    const itemsDataSum = itemsData.reduce((acc, curr) => acc + (curr.value || 0), 0);\n\n    if (itemsDataSum > this._model.total) {\n      throw new Error(`Sum of items can not be great than ${this._model.total}`);\n    }\n\n    if (itemsData.length === 0) {\n      throw new Error(\"Items length can not be equal 0\");\n    }\n\n    let convertedItems = itemsData.map((itemData: IItemData) => {\n      return {\n        ...itemData,\n        onChange: this.mkOnChange(itemData.onChange),\n      };\n    });\n\n    if (force && itemsDataSum !== this._model.total) {\n      this._model.makeSumEqualTotal(convertedItems, itemsDataSum);\n    }\n\n    var items = this._controller.createItems(convertedItems);\n\n    this._controller.addItemsToSlider(items);\n  }\n\n  public removeItem(name: string, onRemove?: () => void): void {\n    this._controller.removeItem(name, this.mkOnRemove(onRemove));\n  }\n}\n","import Slider from './index';\n\nconst node = document.getElementById('slider-root')!;\nconst addItemBtn = document.getElementById('add-item-btn')!;\nconst addSetOfItemsBtn = document.getElementById('add-set-of-items')!;\nconst itemNameInput = document.getElementById('item-name-input')! as HTMLInputElement;\nconst itemValueInput = document.getElementById('item-value-input')! as HTMLInputElement;\nconst itemsList = document.getElementById('items-list')!;\n\nconst slider = new Slider(node);\n\naddItemBtn.addEventListener('click', function () {\n  const name = itemNameInput.value;\n  const value = Number.parseInt(itemValueInput.value, 10);\n  const color = getRandomColor();\n\n  const fragment = createSegmentValueView(name, value, color);\n  const valueFragment = fragment.querySelector('.item-value')!;\n\n  const itemData = {\n    name,\n    value,\n    onChange: updateValue,\n    color,\n  };\n\n  slider.addItem(itemData);\n\n  function updateValue(value: number) {\n    valueFragment.textContent = value + '%';\n  }\n});\n\naddSetOfItemsBtn.addEventListener('click', function () {\n\n  const itemsData = [\n    { name: 'Apples', value: 15, onChange: undefined },\n    { name: 'Bananas', value: 60, onChange: undefined },\n    { name: 'Oranges', value: 15, onChange: undefined },\n    { name: 'Avocados', value: 1, onChange: undefined },\n  ];\n\n  const colors = itemsData.map(_ => getRandomColor());\n\n  const withColorsItemsData = itemsData.map((item, index) => {\n    return {\n      ...item,\n      color: colors[index],\n    };\n  })\n\n  const valueFragments = withColorsItemsData.map(item => {\n    return createSegmentValueView(item.name, item.value, item.color);\n  }).map(fragment => {\n    return fragment.querySelector('.item-value')!;\n  });\n\n  const onChanges = valueFragments.map(valueFragment => {\n    return (value: number) => {\n      valueFragment.textContent = value + '%';\n    }\n  });\n\n  const withOnChangeItemsData = withColorsItemsData.map((item, index) => {\n    return {\n      ...item,\n      onChange: onChanges[index],\n    };\n  });\n\n  slider.addItems(withOnChangeItemsData, {\n    force: true,\n  });\n});\n\nfunction createSegmentValueView(name: string, value: number, color: string) {\n  const fragment = document.createElement('div');\n  fragment.classList.add(name);\n  fragment.classList.add('item-view');\n\n  const dataContainer = document.createElement('div');\n  dataContainer.classList.add('data-container');\n\n  const removeItemContainer = document.createElement('div');\n  removeItemContainer.classList.add('remove-item-container');\n\n  const removeButton = document.createElement('button');\n  removeButton.textContent = `Remove item`;\n  removeButton.classList.add('btn_remove');\n\n  removeButton.addEventListener('click', function () {\n    slider.removeItem(name, () => {\n      fragment.remove();\n    });\n  });\n\n  removeItemContainer.appendChild(removeButton);\n\n  const nameFragment = document.createElement('span');\n  nameFragment.classList.add('item-name');\n  nameFragment.textContent = name;\n  nameFragment.style.color = color;\n\n  const valueFragment = document.createElement('span');\n  valueFragment.classList.add('item-value');\n  valueFragment.textContent = String(value);\n\n  dataContainer.append(nameFragment);\n  dataContainer.append(valueFragment);\n\n  fragment.appendChild(dataContainer);\n  fragment.appendChild(removeItemContainer);\n\n  itemsList.appendChild(fragment);\n\n  return fragment;\n}\n\nfunction getRandomColor(): string {\n  var letters = '0123456789ABCDEF';\n  var color = '#';\n  for (var i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n}\n"]}