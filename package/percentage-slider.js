parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Es8J":[function(require,module,exports) {
!function(){var e=[window.Element,window.CharacterData,window.DocumentType],r=[];e.forEach(function(e){e&&r.push(e.prototype)}),r.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}(),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r,n=Object(this),t=n.length>>>0,o=arguments[1],i=0;i<t;i++)if(r=n[i],e.call(o,r,i,n))return i;return-1});
},{}],"bYio":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(){this.items={},this.total=100}return t.prototype.getEqualParts=function(t){for(var e=[],r=this.total;r>0&&t>0;){var o=r/t;r-=o=o%2==0?Math.floor(r/t):Math.ceil(r/t),t--,e.push(o)}return e},t.prototype.getSumOfItems=function(){var t=this;return Object.keys(this.items).reduce(function(e,r){var o=t.items[r].value;return isNaN(o)?e:e+o},0)},t.prototype.isValidValue=function(t){t=t&&isNaN(t)?0:t;return this.getSumOfItems()+(t||0)<=this.total},t.prototype.hasNoItems=function(){return 0===Object.keys(this.items).length},t.prototype.makeSumEqualTotal=function(t,e){var r=this.total-e,o=t.length-1;t[o].value=(t[o].value||0)+r},t}();exports.default=t;
},{}],"NzUi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(t,n){this.node=t,this.slider=e.createSlider(),this.items={},this.handles=[],this.makeHandleMoveableCls=n,this.node.appendChild(this.slider)}return e.createSlider=function(){var t=document.createElement("div");return t.classList.add("slider"),t.setAttribute("name","slider_"+ ++e.ids),t},e.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},e.removeElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},e.prototype.removeFromHandles=function(e){this.handles=this.handles.filter(function(t){return t.handle!==e})},e.prototype.createLine=function(e,t){var n=document.createElement("div");return n.setAttribute("name",e),n.classList.add("line"),n.style.background=t,n},e.prototype.createHandle=function(){var e=document.createElement("div");return e.classList.add("handle"),e},e.prototype.appendItem=function(e){this.slider.insertBefore(e,this.slider.firstChild)},e.prototype.setLineWidth=function(e,t){this.items[e].line.style.width=t+"%"},e.prototype.getLastItemName=function(){var e=this,t=Object.keys(this.items).filter(function(t){return null===e.items[t]._next},this);if(1!==t.length)throw new Error("Error when trying to find last item");return t[0]},e.prototype.getHandleData=function(e){var t=this.handles.findIndex(function(t){return t.handle===e});if(-1===t)throw new Error("Error when trying to find handle");return this.handles[t]},e.prototype.getPercentOf=function(e){var t=this.items[e].line.offsetWidth;return this.convertToPercent(t)},e.prototype.convertToPercent=function(e){return 100*e/this.slider.offsetWidth},e.prototype.findHandleDataByToLineName=function(e){var t=this.handles.findIndex(function(t){return t.nameTo===e});return-1===t?null:this.handles[t]},e.prototype.findHandleDataByFromLineName=function(e){var t=this.handles.findIndex(function(t){return t.nameFrom===e});return-1===t?null:this.handles[t]},e.prototype.makeHandleMoveable=function(e,t){this.makeHandleMoveableCls.makeHandleMoveable(e,t)},e.prototype.calculateZIndexForExtraLeftCase=function(e){var t=this.handles.findIndex(function(t){return t.handle===e});e.style.zIndex=String(t)},e.ids=0,e}();exports.default=e;
},{}],"sLKb":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./View/view")),i=function(){function e(e,t){this.createItems=function(e){if(1===e.length)return this.createSingleItem(e[0].name,e[0].value,e[0].onChange,e[0].color);var t=e[0],i=this.createSingleItem(t.name,t.value,t.onChange,t.color),n=e.slice(1).map(function(e){return this.createItem(e.name,e.value,e.onChange,e.color)},this);return[i].concat(n)},this._model=e,this._view=t}return e.prototype.createSingleItem=function(e,t,i,n){if(!e||""===e.trim())throw new Error("Name must be provided!");var a=this._view.createLine(e,n),s={name:e,line:a,onChange:i,_next:null,_previous:null},m={name:e,value:t};return this._view.items[e]=s,this._view.setLineWidth(e,t),this._model.items[e]=m,i(t,{auto:t===this._model.total}),{line:a,name:e,value:t}},e.prototype.createItem=function(e,t,i,n){var a=this._view.createLine(e,n),s=this._view.getLastItemName();this._model.items[e]={name:e,value:t},this._view.items[e]={name:e,line:a,onChange:i,_previous:this._view.items[s],_next:null},this._view.items[s]._next=this._view.items[e];var m=this._view.createHandle();return this._view.handles.push({handle:m,nameFrom:s,nameTo:e}),{name:e,line:a,handle:m}},e.prototype.divideSliderIntoEqualParts=function(){var e=Object.keys(this._model.items),t=e.length,i=this._model.getEqualParts(t);e.forEach(function(e,t){this._model.items[e].value=i[t],(0,this._view.items[e].onChange)(i[t],{auto:!0});var n=i.slice(0,t+1).reduce(function(e,t){return e+t},0);this._view.setLineWidth(e,n)},this),this._view.handles.forEach(function(e){var t={handle:e.handle,name:e.nameTo};this.bindHandle(t)},this)},e.prototype.addItemToSlider=function(e,t){var i=this,n=Object.keys(this._model.items).reduce(function(e,t){return e+i._model.items[t].value},0);this._view.setLineWidth(t.name,n),this._view.appendItem(t.handle),this.bindHandle(t),this._view.appendItem(t.line),this._view.items[t.name].onChange(e)},e.prototype.addItemsToSlider=function(e){var t=this;if(Array.isArray(e)){var i=e[0];this._view.appendItem(i.line),e.forEach(function(e,i,n){if(!(0===i)){var a=e.name,s=t._model.items[a].value,m=n[i-1].name,o=t._view.getPercentOf(m);t._view.setLineWidth(e.name,s+o),t._view.appendItem(e.handle),t.bindHandle(e),t._view.appendItem(e.line),t._view.items[a].onChange(s)}})}else this._view.appendItem(e.line)},e.prototype.addItemToSliderAuto=function(e){this.divideSliderIntoEqualParts(),this._view.appendItem(e.handle),this._view.appendItem(e.line)},e.prototype.addItemToSliderGreedy=function(e){var t=this._model.total-this._model.getSumOfItems();this._model.items[e.name].value=t,this._view.setLineWidth(e.name,this._model.total),this._view.appendItem(e.handle),this.bindHandle(e),this._view.appendItem(e.line),this._view.items[e.name].onChange(t,{auto:!0})},e.prototype.addItemToSliderBySplitLastItem=function(e){var t=this._view.items[e.name]._previous,i=(t&&this._model.items[t.name].value||0)/2,n=Math.floor(i),a=Math.ceil(i);t&&t.line&&(t.line.style.width=parseInt(t.line.style.width||"0")-a+"%"),this._model.items[e.name].value=a,t&&(this._model.items[t.name].value=n),this.addItemToSlider(a,e),this._view.items[e.name].onChange(a),t&&this._view.items[t.name].onChange(n)},e.prototype.bindHandle=function(e){var t=this,i=e.handle,n=this._view.items[e.name]._previous;i.style.left=n&&Math.round(this._view.getPercentOf(n.name))+"%";this._view.makeHandleMoveable(i,function(e,n){var a=t._view.handles.findIndex(function(e){return e.handle===i});if(-1===a)throw new Error("Can't find handle");var s=t._view.handles[a],m=s.nameFrom,o=s.nameTo;t._view.setLineWidth(m,n);var l=e-n;t._model.items[m].value-=l,t._model.items[o].value+=l;var r=t._view.items[m].onChange,h=t._view.items[o].onChange;r(t._model.items[m].value),h(t._model.items[o].value)})},e.prototype.removeItem=function(e,i){var n=this,a=this._model.items[e],s=this._view.items[e];if(a&&s){if(1===Object.keys(this._model.items).length)return this._model.items={},this._view.items={},this._view.handles=[],t.default.removeElement(s.line),void i();var m=this._view.getLastItemName()===e;if(m){var o=this._view.findHandleDataByToLineName(e),l=s.line,r=o&&o.nameFrom,h=a.value;if(!r)throw new Error("Unexpected behavior during remove last item");return this._view.items[r]._next=null,this._model.items[r].value+=h,this._view.setLineWidth(r,this._model.total),this._view.items[r].onChange(this._model.items[r].value,{auto:!0}),o&&(t.default.removeElement(o.handle),this._view.removeFromHandles(o.handle)),t.default.removeElement(l),delete this._model.items[e],delete this._view.items[e],void i()}var d=this._view.findHandleDataByFromLineName(e),v=d&&d.nameTo,_=a.value,u=s.line;if(!v)throw new Error("Unexpected behavior during remove item");this._model.items[v].value+=_,this._view.items[v]._previous=s._previous,null===s._previous||s._previous&&(s._previous._next=s._next);!function(){if(!m){var t=n._view.findHandleDataByToLineName(e),i=n._view.findHandleDataByFromLineName(e);t&&i&&(t.nameTo=i.nameTo)}}(),this._view.items[v].onChange(this._model.items[v].value),d&&(this._view.removeFromHandles(d.handle),t.default.removeElement(d.handle)),t.default.removeElement(u),delete this._model.items[e],delete this._view.items[e],i()}else console.warn("Item "+e+" not found")},e}();exports.default=i;
},{"./View/view":"NzUi"}],"KxcX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.prototype.makeHandleMoveable=function(e,t){var n=this;if(!this.view)throw new Error("View field is not initialized");e.ontouchstart=function(i){i.cancelable&&i.preventDefault();var o=n.view.slider.firstChild?getComputedStyle(n.view.slider.firstChild).width:"0",r=parseFloat(o||""),a=100!==Math.round(n.view.convertToPercent(r)),l=i.touches[0].clientX-e.getBoundingClientRect().left,d=function(i){var o=i.touches[0].clientX-l-n.view.slider.getBoundingClientRect().left;!function(){var t=n.view.getHandleData(e).nameFrom,i=n.view.findHandleDataByToLineName(t);if(null!==i){var r=i&&i.handle,a=r&&parseFloat(getComputedStyle(r).left||"0")||0;if(o<a)return void(o=a)}o<0&&(o=0)}(),function(){var t=n.view.slider.offsetWidth,i=n.view.slider.getBoundingClientRect().left;if(o+=i,a){var r=n.view.slider.firstChild;t=r&&r.offsetWidth||t,i=r&&r.getBoundingClientRect().left||i}var l=n.view.getHandleData(e).nameTo,d=n.view.findHandleDataByFromLineName(l);if(null!==d&&d){var v=d.handle,u=parseFloat(getComputedStyle(v).left||"0");if(o>u+i)return void(o=u)}(o-=i)>t&&(o=t)}();var r=parseFloat(getComputedStyle(e).left||"0"),d=Math.round(n.view.convertToPercent(o)),v=Math.round(n.view.convertToPercent(r));e.style.left=d+"%",e.style.zIndex="1",0===d&&n.view.calculateZIndexForExtraLeftCase(e),t(v,d)};document.addEventListener("touchmove",d),document.addEventListener("touchend",function e(){document.removeEventListener("touchend",e),document.removeEventListener("touchmove",d)})},e.ondragstart=function(){return!1}},e}();exports.MakeHandleMoveableMobile=e;var t=function(){function e(){}return e.prototype.makeHandleMoveable=function(e,t){var n=this;if(!this.view)throw new Error("View field is not initialized");e.onmousedown=function(i){i.preventDefault();var o=n.view.slider.firstChild?getComputedStyle(n.view.slider.firstChild).width:"0",r=parseFloat(o||""),a=100!==Math.round(n.view.convertToPercent(r)),l=i.clientX-e.getBoundingClientRect().left,d=function(i){var o=i.clientX-l-n.view.slider.getBoundingClientRect().left;!function(){var t=n.view.getHandleData(e).nameFrom,i=n.view.findHandleDataByToLineName(t);if(null!==i){var r=i&&i.handle,a=r&&parseFloat(getComputedStyle(r).left||"0")||0;if(o<a)return void(o=a)}o<0&&(o=0)}(),function(){var t=n.view.slider.offsetWidth,i=n.view.slider.getBoundingClientRect().left;if(o+=i,a){var r=n.view.slider.firstChild;t=r&&r.offsetWidth||t,i=r&&r.getBoundingClientRect().left||i}var l=n.view.getHandleData(e).nameTo,d=n.view.findHandleDataByFromLineName(l);if(null!==d&&d){var v=d.handle,u=parseFloat(getComputedStyle(v).left||"0");if(o>u+i)return void(o=u)}(o-=i)>t&&(o=t)}();var r=parseFloat(getComputedStyle(e).left||"0"),d=Math.round(n.view.convertToPercent(o)),v=Math.round(n.view.convertToPercent(r));e.style.left=d+"%",e.style.zIndex="1",0===d&&n.view.calculateZIndexForExtraLeftCase(e),t(v,d)};document.addEventListener("mousemove",d),document.addEventListener("mouseup",function e(){document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",d)})},e.ondragstart=function(){return!1}},e}();function n(){return void 0!==window.orientation?e:t}exports.MakeHandleMoveableDesktop=t;var i=n();exports.default=i;
},{}],"vfYE":[function(require,module,exports) {

},{}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("./polyfills");var r=t(require("./mvc/model")),o=t(require("./mvc/controller")),i=t(require("./mvc/View/view")),n=t(require("./mvc/View/makeMoveable"));require("./percentage-slider.css");var a=function(){function t(e){if(this._wasChanged=!1,!e)throw new Error("Node is empty!");this._model=new r.default,this._makeMoveable=new n.default,this._view=new i.default(e,this._makeMoveable),this._makeMoveable.view=this._view,this._controller=new o.default(this._model,this._view)}return t.prototype.mkOnChange=function(e){var t=this;return function(r,o){var i=o&&o.auto,n="number"==typeof r&&!isNaN(r);t._wasChanged=!i||t._wasChanged,e&&n&&e(r)}.bind(this)},t.prototype.mkOnRemove=function(e){return function(){e&&e()}.bind(this)},t.prototype.addItem=function(e){var t=e.value,r=e.onChange,o=e.name,n=e.color;if(!this._model.isValidValue(t))throw new Error("Total can't be greater than "+this._model.total);if(this._model.items[o])throw new Error("Name '"+o+"' has already taken");if(this._model.hasNoItems()){var a=parseInt(""+t,10)||this._model.total,l=this._controller.createSingleItem(o,a,this.mkOnChange(r),n||i.default.getRandomColor());return this._view.appendItem(l.line),void(t&&!isNaN(t)&&(this._wasChanged=!0))}var s=this._controller.createItem(o,t||0,this.mkOnChange(r),n||i.default.getRandomColor());if(t&&!isNaN(t))return this._wasChanged=!0,void this._controller.addItemToSlider(t,s);this._wasChanged?this._model.getSumOfItems()===this._model.total?this._controller.addItemToSliderBySplitLastItem(s):this._controller.addItemToSliderGreedy(s):this._controller.addItemToSliderAuto(s)},t.prototype.addItems=function(t,r){var o=this,i=r&&r.force;if(0!==Object.keys(this._model.items).length)throw new Error("Items can not be added to already initialized slider");var n=t.reduce(function(e,t){return e+(t.value||0)},0);if(n>this._model.total)throw new Error("Sum of items can not be great than "+this._model.total);if(0===t.length)throw new Error("Items length can not be equal 0");var a=t.map(function(t){return e(e({},t),{onChange:o.mkOnChange(t.onChange)})});i&&n!==this._model.total&&this._model.makeSumEqualTotal(a,n);var l=this._controller.createItems(a);this._controller.addItemsToSlider(l)},t.prototype.removeItem=function(e,t){this._controller.removeItem(e,this.mkOnRemove(t))},t}();exports.default=a,window.PercentageSlider=a;
},{"./polyfills":"Es8J","./mvc/model":"bYio","./mvc/controller":"sLKb","./mvc/View/view":"NzUi","./mvc/View/makeMoveable":"KxcX","./percentage-slider.css":"vfYE"}]},{},["QCba"], null)